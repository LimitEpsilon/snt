\usepackage{setspace}
\usepackage{stmaryrd} % not in acmart
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{csquotes}
\usepackage{fancyvrb} % not in acmart
\usepackage{hyperref}

%%% Math settings
\usepackage{amssymb,amsmath,amsthm}
\usepackage{mathtools} % not in acmart
\newtheorem{lem}{Lemma}[section]
\newtheorem{thm}{Theorem}[section]
\newtheorem{cor}{Corollary}[section]
\newtheorem{clm}{Claim}[section]

\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{example}{Example}[section]

%%% PL constructs
\usepackage{galois}
\usepackage{mathpartir}

%%% Custom commands
\newcommand*{\vbar}{|}
\newcommand*{\cons}{::}
\newcommand*{\pset}[1]{\mathcal{P}({#1})}
\newcommand*{\closeloc}[2]{\prescript{\backslash{#1}}{}{#2}}
\newcommand*{\openloc}[2]{{#2}^{#1}}

% push right or left in math mode
% https://tex.stackexchange.com/questions/83509/hfill-in-math-mode
\makeatletter
\newcommand{\specialcell}[1]{\ifmeasuring@#1\else\omit$\displaystyle#1$\ignorespaces\fi}
\newcommand{\pushright}[1]{\ifmeasuring@#1\else\omit\hfill$\displaystyle#1$\fi\ignorespaces}
\newcommand{\pushleft}[1]{\ifmeasuring@#1\else\omit$\displaystyle#1$\hfill\fi\ignorespaces}
\makeatother

\def\ovbarw{1.2mu}
\def\ovbarh{1}
\newcommand*{\ovbar}[1]{\mkern \ovbarw\overline{\mkern-\ovbarw{\smash{#1}\scalebox{1}[\ovbarh]{\vphantom{i}}}\mkern-\ovbarw}\mkern \ovbarw}
\newcommand*{\A}[1]{\overset{\,_{\mbox{\Large .}}}{#1}}
\newcommand*{\Abs}[1]{{#1}^{\#}}
\newcommand*{\Expr}{\textnormal{Expr}}
\newcommand*{\ExprVar}{\textnormal{Var}}
\newcommand*{\Ctx}{\textnormal{Env}}
\newcommand*{\Mtx}{\textnormal{MEnv}}
\newcommand*{\ctx}{\sigma}
\newcommand*{\Value}{\textnormal{Val}}
\newcommand*{\Malue}{\textnormal{MVal}}
\newcommand*{\Walue}{\textnormal{WVal}}
\newcommand*{\Mem}{\textnormal{Mem}}
\newcommand*{\Heap}{\textnormal{Heap}}
\newcommand*{\Loc}{\textnormal{Loc}}
\newcommand*{\FLoc}{\textnormal{FLoc}}
\newcommand*{\Addr}{\textnormal{Addr}}
\newcommand*{\mem}{m}
\newcommand*{\heap}{H}
\newcommand*{\dom}{\textnormal{dom}}
\newcommand*{\AMem}{\A{\textnormal{Heap}}}
\newcommand*{\Tick}{\textnormal{Tick}}
\newcommand*{\lfp}{\textnormal{lfp}}
\newcommand*{\Step}{\textnormal{Step}}
\newcommand*{\step}{\textnormal{step}}
\newcommand*{\semarrow}{\Downarrow}
\newcommand*{\synlink}{\rtimes}
\newcommand*{\semlink}{\mathbin{\textnormal{\rotatebox[origin=c]{180}{$\propto$}}}}
\newcommand*{\equivalent}{\sim}
\newcommand*{\tystate}{t}

\newcommand*{\doubleplus}{\ensuremath{\mathbin{+\mkern-3mu+}}}
\newcommand*{\Link}{\textnormal{Link}}
\newcommand*{\link}{\textnormal{link}}
\newcommand*{\sembracket}[1]{\llbracket{#1}\rrbracket}
\newcommand*{\fin}[2]{{#1}\xrightarrow{\mbox{\tiny{fin}}}{#2}}
\newcommand*{\eval}{\textnormal{eval}}

% symbol standing for partial proof tree
\newcommand*{\ptree}{t}

% program point
\newcommand*{\ppoint}{p}

% labelled expressions {p:e}
\newcommand*{\plabel}[2]{\{{#1}:{#2}\}}

% labelled locations \ell^p
\newcommand*{\llabel}[2]{{#2}^{#1}}

% big-step evaluation judgment σ ⊢ e ⇓ v
\newcommand*{\evjudg}[3]{{#1}\vdash{#2}\Downarrow{#3}}

% typing judgment Γ ⊢ e : τ, S
\newcommand*{\typejudg}[4]{{#1}\vdash{#2}:{#3},{#4}}

% semantic typing judgment Γ ⊨ e : τ, S
\newcommand*{\semtypejudg}[4]{{#1}\vDash{#2}:{#3},{#4}}

\newcommand*{\arrowty}[3]{{#1}\xrightarrow{\mbox{\tiny$#2$}}{#3}}
\newcommand*{\ValRel}[1]{\mathcal{V}\sembracket{#1}}
\newcommand*{\WalRel}[1]{\mathcal{W}\sembracket{#1}}
\newcommand*{\ExprRel}[1]{\mathcal{X}\sembracket{#1}}
\newcommand*{\CtxRel}[1]{\mathcal{C}\sembracket{#1}}
\newcommand*{\EvtRel}[1]{\mathcal{\event}\sembracket{#1}}
\newcommand*{\ModRel}[1]{\mathcal{M}\sembracket{#1}}
\newcommand*{\TyEnv}{\textnormal{TyEnv}}
\newcommand*{\TyVar}{\textnormal{TyVar}}
\newcommand*{\Type}{\textnormal{Type}}
\newcommand*{\Subst}{\textnormal{Subst}}
\newcommand*{\Safe}{S}
\newcommand*{\unsafe}{\textnormal{unsafe}}

\newcommand*{\abbrtext}[1]{{#1}}
\newcommand*{\Hd}{\abbrtext{Hd}}
\newcommand*{\Tl}{\abbrtext{Tl}}
\newcommand*{\event}{S}
\newcommand*{\Event}{\textnormal{Shadow}}
\newcommand*{\InitE}{\mathsf{Init}}
\newcommand*{\ReadE}{\mathsf{Read}}
\newcommand*{\CallE}{\mathsf{Call}}
\newcommand*{\DerefSE}{\mathsf{Deref}}
\newcommand*{\DerefAE}{\mathsf{Deref}}
